<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Impact / Outcome</title>
  
<link rel="stylesheet" href="styles.css">

</head>
<body>
  
<div class="appbar">
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="badge" aria-hidden="true"></div>
        <div>
          <b>Dashboard MoNEv Adaptasi</b>
          <!-- <small class="muted">Ringkas • Drill-down sektoral & kewilayahan</small> -->
        </div>
      </div>

      <div class="userbox">
        <div class="searchbox">
          <span class="sicon" aria-hidden="true">⌕</span>
          <input id="globalSearch" type="search" placeholder="Cari sektor, wilayah, indikator, aksi..." />
        </div>

        <button class="helpbtn" id="helpBtn" type="button" title="Bantuan">?</button>

        <!-- <span class="userchip">Periode: 2024</span> -->
        <span class="avatar" title="User"></span>
      </div>
    </div>
  </div>

  <div class="tabbar">
    <div class="inner tabrow">
      <div class="pagehead">
        <h1>Impact / Outcome</h1>
        <div class="sub">Membaca tren sebagai sinyal untuk prioritas evaluasi & verifikasi.</div>
      </div>

      
      <nav class="menu menu-right">
        <div class="dd active">
          <button class="dd-btn active" type="button">Dashboard ▾</button>
          <div class="dd-menu">
            <a href="index.html" class="">Beranda</a>
            <a href="horizontal.html" class="">Dashboard Horizontal</a>
            <a href="vertical.html" class="">Dashboard Vertikal</a>
            <a href="impact.html" class="active">Dashboard Impact</a>
          </div>
        </div>
        <a href="horizontal_guideline.html" class="">Horizontal</a>
        <a href="vertical_guideline.html" class="">Vertikal</a>
        <a href="impact_assessment.html" class="">Impact</a>
        <a href="aksi_pembiayaan.html" class="">Aksi &amp; Pembiayaan</a>
        <a href="pelaporan.html" class="">Pelaporan</a>
        <!-- <a href="index.html" class="active">Beranda</a> -->

        <!-- <div class="dd">
          <button class="dd-btn" type="button">Horizontal ▾</button>
          <div class="dd-menu">
            <a href="horizontal.html" class="">Dashboard Horizontal</a>
            <a href="horizontal_guideline.html" class="">Guideline Horizontal</a>
          </div>
        </div>

        <div class="dd">
          <button class="dd-btn" type="button">Vertikal ▾</button>
          <div class="dd-menu">
            <a href="vertical.html" class="">Dashboard Vertikal</a>
            <a href="vertical_guideline.html" class="">Guideline Vertikal</a>
          </div>
        </div>

        <div class="dd">
          <button class="dd-btn" type="button">Impact ▾</button>
          <div class="dd-menu">
            <a href="impact.html" class="">Dashboard Impact</a>
            <a href="impact_assessment.html" class="">Impact Assessment</a>
          </div>
        </div> -->
      </nav>
    </div>
  </div>
</div>

  <div class="wrap">
    <section class="grid">
      <div class="card span-3"><div class="bd kpi">
        <div class="label">Outcome Terpantau</div><div class="value">12</div><div class="pill">Outcome set</div>
      </div></div>
      <div class="card span-3"><div class="bd kpi">
        <div class="label">Indikator Outcome</div><div class="value">28</div><div class="pill">Lampiran III + tambahan</div>
      </div></div>
      <div class="card span-3"><div class="bd kpi">
        <div class="label">Wilayah Prioritas Tinjau</div><div class="value">9</div><div class="pill">Signal-based</div>
      </div></div>
      <div class="card span-3"><div class="bd kpi">
        <div class="label">Isu Data Kritis</div><div class="value">17</div><div class="pill">QA/QC log</div>
      </div></div>

      <div class="card span-6">
        <div class="hd"><div>
          <div class="h">Peta Sinyal Outcome (Placeholder)</div>
          <div class="s">Merah/kuning/hijau sebagai sinyal tren & ketidakpastian</div>
        </div><span class="pill">Peta</span></div>
        <div class="bd">
          <div class="footer-note" style="margin-top:0">Placeholder visual. Dapat berupa peta tematik outcome by wilayah/kelompok rentan.</div>
          <div style="height:260px;border-radius:14px;border:1px dashed rgba(15,23,42,.20);background:linear-gradient(180deg, rgba(37,99,235,.08), rgba(6,182,212,.05));display:flex;align-items:center;justify-content:center;color:rgba(15,23,42,.72);font-size:13px;padding:14px;text-align:center">
            Peta outcome (placeholder)<br/>integrasi data sektoral & kewilayahan
          </div>
        </div>
      </div>

      <div class="card span-6">
        <div class="hd"><div>
          <div class="h">Tren Outcome (Dummy)</div>
          <div class="s">Grafik membantu memilih fokus evaluasi</div>
        </div><span class="pill">Grafik</span></div>
        <div class="bd">
          <canvas id="c" width="900" height="320"></canvas>
          <div class="footer-note">Catatan: grafik bersifat contoh; keluaran operasional mengambil indikator Bab 5.</div>
        </div>
      </div>

      <div class="card span-12">
        <div class="hd"><div>
          <div class="h">Daftar Outcome & Sinyal Indikator (Ringkas)</div>
          <div class="s">Kaitkan outcome ↔ indikator ↔ data ↔ isu QA/QC ↔ rekomendasi tindak lanjut</div>
        </div><span class="pill">Tabel</span></div>
        <div class="bd">
          <div class="table-wrap"><table>
            <thead>
              <tr>
                <th style="width:22%">Outcome (ringkas)</th>
                <th style="width:22%">Indikator Kunci</th>
                <th style="width:18%">Sumber Data</th>
                <th style="width:18%">Sinyal</th>
                <th style="width:20%">Tindak Lanjut</th>
              </tr>
            </thead>
            <tbody id="tb"></tbody>
          </table></div>
          <div class="footer-note">Tabel ini tidak menyimpulkan “dampak”; ia memandu prioritas evaluasi (mis. contribution analysis).</div>
        </div>
      </div>
    </section>

    <div class="btnrow">
      <button id="btnMeta">Lihat Catatan Metodologis</button>
      <button class="primary" id="btnExport">Ekspor Ringkasan Outcome</button>
    </div>
  </div>

  <div class="modal" id="modal">
    <div class="box">
      <div class="hd">
        <b id="mt">Detail</b>
        <button id="close">Tutup</button>
      </div>
      <div class="bd" id="mb"></div>
    </div>
  </div>

<script>
  const rows = [
    {
      o:"Ketahanan pangan rumah tangga meningkat",
      i:"Produktivitas stabil di bawah variabilitas iklim; cakupan perlindungan sosial adaptif",
      s:"SIPD; SRN; survei sektoral",
      sig:"Kuning (tren membaik, ketidakpastian tinggi)",
      next:"Verifikasi definisi indikator; pilih lokasi studi kontribusi"
    },
    {
      o:"Risiko banjir & kekeringan berkurang",
      i:"Keandalan layanan air/irigasi; kejadian banjir; kesiapsiagaan",
      s:"SIPD; data layanan; log kejadian",
      sig:"Merah (anomali di beberapa wilayah)",
      next:"Audit data kejadian; cek konsistensi periode; penajaman baseline"
    },
    {
      o:"Ketahanan layanan kesehatan iklim meningkat",
      i:"Kesiapsiagaan heat-health; layanan peringatan dini",
      s:"SIPD; laporan layanan; BMKG",
      sig:"Hijau (cukup konsisten)",
      next:"Dokumentasi praktik baik; replikasi kebijakan"
    },
  ];
  const tb=document.getElementById('tb');
  rows.forEach(r=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td><b>${r.o}</b></td><td>${r.i}</td><td>${r.s}</td><td>${r.sig}</td><td>${r.next}</td>`;
    tb.appendChild(tr);
  });

  // dummy chart
  const c=document.getElementById('c'), ctx=c.getContext('2d'), w=c.width, h=c.height;
  ctx.globalAlpha=.12; ctx.strokeStyle="rgba(15,23,42,.45)";
  for(let x=40;x<w;x+=60){ctx.beginPath();ctx.moveTo(x,20);ctx.lineTo(x,h-40);ctx.stroke();}
  for(let y=20;y<h-40;y+=50){ctx.beginPath();ctx.moveTo(40,y);ctx.lineTo(w-20,y);ctx.stroke();}
  ctx.globalAlpha=1; ctx.strokeStyle="rgba(15,23,42,.55)";
  ctx.beginPath();ctx.moveTo(40,20);ctx.lineTo(40,h-40);ctx.lineTo(w-20,h-40);ctx.stroke();
  const series=[{p:"2023",v:62},{p:"2024",v:68},{p:"2025",v:71}];
  const max=100, x0=40, y0=h-40, iw=w-60, ih=h-70;
  ctx.strokeStyle="rgba(37,99,235,.95)"; ctx.lineWidth=3; ctx.beginPath();
  series.forEach((d,i)=>{const x=x0+iw*(i/(series.length-1)); const y=y0-ih*(d.v/max); if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);});
  ctx.stroke();
  ctx.fillStyle="rgba(6,182,212,.95)";
  series.forEach((d,i)=>{const x=x0+iw*(i/(series.length-1)); const y=y0-ih*(d.v/max); ctx.beginPath();ctx.arc(x,y,5,0,Math.PI*2);ctx.fill();});

  // modal
  const modal=document.getElementById('modal'), mt=document.getElementById('mt'), mb=document.getElementById('mb');
  function open(title, html){mt.textContent=title; mb.innerHTML=html; modal.style.display='flex';}
  function close(){modal.style.display='none';}
  document.getElementById('close').onclick=close;
  modal.onclick=(e)=>{if(e.target===modal) close();}

  document.getElementById('btnMeta').onclick=()=>open("Catatan Metodologis (Ringkas)", `
    <p>Tampilan ini bersifat <b>signal-based</b> untuk memandu prioritas evaluasi dan pembelajaran, bukan untuk mempertanggungjawabkan kausalitas tunggal.</p>
    <ul>
      <li>Gunakan indikator Bab 5 sebagai mesin ukur (deskriptif & komparatif antarperiode).</li>
      <li>Jika diperlukan evaluasi mendalam, lakukan pendekatan berbasis teori (mis. contribution analysis) pada fokus yang dipilih.</li>
      <li>Temuan wajib melewati QA/QC dan dokumentasi metadata sebelum dipakai untuk ringkasan pelaporan.</li>
    </ul>
  `);

  document.getElementById('btnExport').onclick=()=>{
    const text=[
      "Ringkasan Outcome (Dummy) — Impact/Outcome View",
      "Catatan: untuk uji UX; bukan output resmi.",
      "—",
      ...rows.map(r=>`• ${r.o} | Sinyal: ${r.sig} | Tindak lanjut: ${r.next}`)
    ].join("\n");
    const blob=new Blob([text],{type:"text/plain;charset=utf-8"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download="Ringkasan_Outcome_Dummy.txt";
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  };
    // --- Help modal ---
  const helpBtn = document.getElementById("helpBtn");
  const helpModal = document.getElementById("helpModal");
  const helpClose = document.getElementById("helpClose");

  if(helpBtn && helpModal && helpClose){
    helpBtn.onclick = () => helpModal.style.display = "flex";
    helpClose.onclick = () => helpModal.style.display = "none";
    helpModal.addEventListener("click", (e) => {
      if(e.target === helpModal) helpModal.style.display = "none";
    });
  }

  // --- Simple search (filter Akses Cepat cards + highlight text) ---
  const search = document.getElementById("globalSearch");
  if(search){
    const cards = Array.from(document.querySelectorAll(".qcard"));
    search.addEventListener("input", () => {
      const q = search.value.trim().toLowerCase();
      cards.forEach(el => {
        const text = el.innerText.toLowerCase();
        el.style.display = (!q || text.includes(q)) ? "block" : "none";
      });
    });
  }
</script>
</body>
</html>
